================================================================================
ðŸš€ COMANDO ÃšNICO PARA ATUALIZAR E REINICIAR TUDO
================================================================================

COPIE E COLE ESTE COMANDO NO TERMINAL (Git Bash ou PowerShell):

--------------------------------------------------------------------------------
OPÃ‡ÃƒO 1: Git Bash (Recomendado)
--------------------------------------------------------------------------------

git checkout -- backend/nfe_system.db && git pull origin main && docker-compose down -v && docker-compose build --no-cache backend && docker-compose up -d && echo "âœ… Sistema atualizado! Aguarde 30 segundos e acesse http://localhost:5173"


--------------------------------------------------------------------------------
OPÃ‡ÃƒO 2: PowerShell (Se Git Bash nÃ£o funcionar)
--------------------------------------------------------------------------------

git checkout -- backend/nfe_system.db; git pull origin main; docker-compose down -v; docker-compose build --no-cache backend; docker-compose up -d; Write-Host "âœ… Sistema atualizado! Aguarde 30 segundos e acesse http://localhost:5173"


================================================================================
O QUE ESSE COMANDO FAZ:
================================================================================

1. git checkout -- backend/nfe_system.db
   â†’ Descarta alteraÃ§Ãµes locais no banco de dados

2. git pull origin main
   â†’ Baixa todas as atualizaÃ§Ãµes do servidor

3. docker-compose down -v
   â†’ Para e REMOVE todos os containers e volumes antigos

4. docker-compose build --no-cache backend
   â†’ ReconstrÃ³i o backend DO ZERO (sem usar cache antigo)

5. docker-compose up -d
   â†’ Sobe todos os serviÃ§os atualizados

6. echo/Write-Host
   â†’ Mostra mensagem de sucesso


================================================================================
APÃ“S EXECUTAR:
================================================================================

1. Aguarde 30-60 segundos (o backend precisa inicializar)

2. Acesse: http://localhost:5173

3. Teste:
   âœ“ Importar nota fiscal XML
   âœ“ Ver histÃ³rico de preÃ§os em "MatÃ©rias-Primas"
   âœ“ Clicar "Recalcular PreÃ§os" em "Produtos"


================================================================================
SE DER ALGUM ERRO:
================================================================================

Execute para ver os logs:

docker-compose logs backend --tail=100


================================================================================
VERIFICAR SE ATUALIZOU:
================================================================================

git log --oneline -1

Deve mostrar:
1f7cf7b fix: adicionar logs detalhados para debug de erro 500


================================================================================
TESTAR SE A FUNÃ‡ÃƒO NOVA EXISTE:
================================================================================

docker-compose exec backend python -c "from app.api.notas import normalizar_nome_materia_prima; print('âœ… FunÃ§Ã£o existe!'); print('Teste:', normalizar_nome_materia_prima('-FIO 2.0X7.0 CANTO QUADRADO'))"

Deve mostrar:
âœ… FunÃ§Ã£o existe!
Teste: FIO 2.0X7.0 CANTO QUADRADO


================================================================================





